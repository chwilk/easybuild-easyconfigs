
# Author:: Jack Perdue <j-perdue@tamu.edu> - TAMU SC Facil.  http://sc.tamu.edu

easyblock = 'MakeCp'

name = 'Wannier90'
version = '1.2'

homepage = 'http://www.wannier.org/'
description = """Maximally-localised Wannier functions (MLWFs) and Wannier90"""

toolchain = {'name': 'ictce', 'version': '7.1.2'}

sources = [SOURCELOWER_TAR_GZ]
source_urls = ['http://www.wannier.org/code']

# update this as toolchain changes
premakeopts = "cat ./config/make.sys.ifort | sed \"s,/opt/intel/mkl721/lib/32,$EBROOTIMKL/mkl/lib/intel64,\" | sed 's/ia32/intel_lp64/g' | sed 's/guide/iomp5/g' | sed 's/lapack/lapack -lmkl_lapack95_lp64 -lmkl_core  -lmkl_intel_thread/' > ./make.sys ; "
#  sed 's/lapack/lapack95_lp64/g'
makeopts = "default lib"

files_to_copy = [
  (['wannier90.x'], 'bin'),
  (['libwannier.a'], 'lib'),
]

sanity_check_paths = {
    'dirs': ['bin', 'lib'],
    'files': ['bin/wannier90.x'],
}

moduleclass = 'chem'
